"use strict";(self.webpackChunkaston_project=self.webpackChunkaston_project||[]).push([[647],{7647:(e,i,s)=>{s.r(i),s.d(i,{default:()=>_});var a=s(5043);const r={wrapper:"moviePage_wrapper__uTEXt",card:"moviePage_card__tlK04",main:"moviePage_main__IlHbL",leftPart:"moviePage_leftPart__npBrV",rightPart:"moviePage_rightPart__Cjw2Q",infoUnderLogo:"moviePage_infoUnderLogo__Kw6Ga",name:"moviePage_name__P57DJ",description:"moviePage_description__W8a0Q",descriptTitle:"moviePage_descriptTitle__zzwjl",descripText:"moviePage_descripText__slxsc",otherInfo:"moviePage_otherInfo__iFWUu",buttons:"moviePage_buttons__tvX2D",dark:"moviePage_dark__D+vc9"};var d=s(3216),t=s(9234),c=s(1678),n=s(2267),o=s(8139),l=s.n(o),v=s(1952),m=s(3003),h=s(4607),u=s(1601);var x=s(579);const _=()=>{const{id:e}=(0,d.g)(),{theme:i}=(0,v.D)(),{isLoading:s}=(()=>{const e=(0,m.d4)(h.kQ),i=(0,m.d4)(h.NH),[s,{isLoading:r}]=u.K.useLazyGetAllFavouritesQuery();return(0,a.useEffect)((()=>{i&&s(null===e||void 0===e?void 0:e.email)}),[i,s,null===e||void 0===e?void 0:e.email]),{isLoading:r}})();if(!e)return(0,x.jsx)("div",{children:"\u0423\u043f\u0441, \u0447\u0442\u043e \u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a"});const{data:o}=t.l.useGetMovieQuery(parseInt(e));return(0,x.jsx)("div",{className:r.wrapper,children:o&&!s?(0,x.jsx)("div",{className:l()(r.card,{[r.dark]:"dark"===i,[r.light]:"light"===i}),children:(0,x.jsxs)("div",{className:r.main,children:[(0,x.jsxs)("div",{className:r.leftPart,children:[(0,x.jsx)("img",{src:o.poster.url,alt:"poster"}),(0,x.jsxs)("div",{className:r.infoUnderLogo,children:[(0,x.jsxs)("div",{className:r.otherInfo,children:[(0,x.jsx)("div",{className:r.descriptTitle,children:"\u0416\u0430\u043d\u0440:"}),(0,x.jsx)("div",{className:r.descripText,children:o.genres.map((e=>"".concat(e.name," ")))})]}),(0,x.jsxs)("div",{className:r.otherInfo,children:[(0,x.jsx)("div",{className:r.descriptTitle,children:"\u0420\u0435\u0439\u0442\u0438\u043d\u0433 \u041a\u0438\u043d\u043e\u041f\u043e\u0438\u0441\u043a\u0430:"}),(0,x.jsx)("div",{className:r.descripText,children:o.rating.kp})]}),(0,x.jsxs)("div",{className:r.otherInfo,children:[(0,x.jsx)("div",{className:r.descriptTitle,children:"\u0413\u043e\u0434:"}),(0,x.jsx)("div",{className:r.descripText,children:o.year})]}),o.budget.value&&(0,x.jsxs)("div",{className:r.otherInfo,children:[(0,x.jsx)("div",{className:r.descriptTitle,children:"\u0411\u044e\u0434\u0436\u0435\u0442:"}),(0,x.jsx)("div",{className:r.descripText,children:"".concat(o.budget.value).concat(o.budget.currency)})]})]})]}),(0,x.jsxs)("div",{className:r.rightPart,children:[(0,x.jsx)("div",{className:r.name,children:o.name}),(0,x.jsxs)("div",{className:r.description,children:[(0,x.jsx)("div",{className:r.descriptTitle,children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:"}),(0,x.jsx)("div",{className:r.descripText,children:o.description})]}),(0,x.jsx)("div",{className:r.buttons,children:(0,x.jsx)(n.o,{movieId:parseInt(e)})})]})]})}):(0,x.jsx)(c.A,{width:45})})}},2267:(e,i,s)=>{s.d(i,{o:()=>v});var a=s(5043),r=s(2339),d=s(3003),t=s(4607),c=s(1601);var n=s(8175),o=s(1678),l=s(579);const v=(0,a.memo)((e=>{let{movieId:i,isFavourPage:s=!1}=e;const{handleAddToFavourite:v,isFetching:m,handleRemoveFromFavourite:h,hasInFavourite:u}=(()=>{const e=(0,d.d4)(t.kQ),[i,s]=(0,a.useState)(!1),{data:n=[],isFetching:o}=c.K.useGetAllFavouritesQuery(null===e||void 0===e?void 0:e.email);(0,a.useEffect)((()=>{o||s(o)}),[o]);const[l,v]=c.K.useAddToFavouriteMutation(),[m,h]=c.K.useRemoveFromFavouriteMutation();return{hasInFavourite:e=>n.includes(e),isFetching:v.isLoading||h.isLoading||i,handleAddToFavourite:async i=>{try{s(!0),await l({email:null===e||void 0===e?void 0:e.email,id:i}),r.Ay.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e")}catch(a){r.Ay.error("\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435...")}},handleRemoveFromFavourite:async i=>{try{s(!0),await m({email:null===e||void 0===e?void 0:e.email,id:i}),r.Ay.success("\u0423\u0441\u043f\u0435\u0448\u043d\u043e \u0443\u0434\u0430\u043b\u0435\u043d\u043e")}catch(a){r.Ay.error("\u041f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435...")}}}})(),[x,_]=(0,a.useState)(u(i)),g=(0,d.d4)(t.NH),j=async e=>{g?(await h(e),_((e=>!e))):r.Ay.error("\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043d\u0430\u0434\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f")};return s?(0,l.jsx)(n.$,{variant:"red",onClick:()=>j(i),disabled:m,children:m?(0,l.jsx)(o.A,{width:15}):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e"}):(0,l.jsx)(l.Fragment,{children:x&&g?(0,l.jsx)(n.$,{variant:"red",onClick:()=>j(i),disabled:m,children:m?(0,l.jsx)(o.A,{width:15}):"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0438\u0437 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0433\u043e"}):(0,l.jsx)(n.$,{variant:"green",onClick:()=>(async e=>{g?(await v(e),_((e=>!e))):r.Ay.error("\u0427\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0434\u043e\u043b\u0436\u0438\u0442\u044c \u043d\u0430\u0434\u043e \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f")})(i),disabled:m,children:m?(0,l.jsx)(o.A,{width:15}):"\u0412 \u0438\u0437\u0431\u0440\u0430\u043d\u043d\u043e\u0435"})})}))}}]);
//# sourceMappingURL=647.6187abf7.chunk.js.map